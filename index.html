<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Музыкальный плеер</title>
  <style>
    body {
      font-family: sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background-color: #f0f0f0;
      background-image: url('IMG/BG.jpg'); /*  Путь к вашему фоновому изображению */
      background-size: cover;
      background-position: center;
      overflow: hidden; /*  Чтобы фон не вызывал полосы прокрутки */
      animation: randomMove 15s infinite; /*  Включаем анимацию */
    }

    @keyframes randomMove {
      0% { background-position: center; }
      25% { background-position: 20% 20%; }
      50% { background-position: 80% 10%; }
      75% { background-position: 10% 70%; }
      100% { background-position: center; }
    }

    .player-container {
      width: 300px;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }

    .cover-image {
      width: 100%;
      height: 300px;
      object-fit: cover;
      position: relative;
    }

    .track-title {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      text-align: center;
      padding: 5px 0;
      font-size: 12px;
    }

    .playlist {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .playlist-item {
      padding: 10px 15px;
      cursor: pointer;
      border-bottom: 1px solid #eee;
      transition: background-color 0.2s;
    }

    .playlist-item:last-child {
      border-bottom: none;
    }

    .playlist-item:hover {
      background-color: #f9f9f9;
    }

    audio {
      width: 100%;
      margin-top: 10px;
    }
  </style>
</head>
<body>

<div class="player-container">
  <img id="cover" class="cover-image" src="IMG/BG.jpg" alt="Обложка">
  <div id="track-title" class="track-title">Название трека</div>
  <ul id="playlist" class="playlist">
    <li class="playlist-item" data-src="Music/1.ogg" data-cover="IMG/1.jpg" data-title="ovenpic - недофнк">ovenpic - недофнк</li>
    <li class="playlist-item" data-src="Music/2.ogg" data-cover="IMG/2.jpg" data-title="ovenpic - глитчфорест">ovenpic - глитчфорест</li>
    <li class="playlist-item" data-src="Music/3.ogg" data-cover="IMG/3.jpg" data-title="ovenpic - лесопарк">ovenpic - лесопарк</li>
    <li class="playlist-item" data-src="Music/4.ogg" data-cover="IMG/4.jpg" data-title="ovenpic - вокруг">ovenpic - вокруг</li>
  </ul>
  <audio id="audio" controls></audio>
</div>

<script>
  const audio = document.getElementById('audio');
  const playlist = document.getElementById('playlist');
  const cover = document.getElementById('cover');
  const trackTitle = document.getElementById('track-title');

  let currentTrackIndex = 0;

  function loadTrack(index) {
    const track = playlist.children[index];
    audio.src = track.dataset.src;
    cover.src = track.dataset.cover;
    trackTitle.textContent = track.dataset.title;
    audio.load(); // Важно вызвать load() после установки src
  }

  playlist.addEventListener('click', (event) => {
    if (event.target.classList.contains('playlist-item')) {
      currentTrackIndex = Array.from(playlist.children).indexOf(event.target);
      loadTrack(currentTrackIndex);
      audio.play();
    }
  });

  audio.addEventListener('ended', () => {
    currentTrackIndex = (currentTrackIndex + 1) % playlist.children.length;
    loadTrack(currentTrackIndex);
    audio.play();
  });

  // Загрузка первого трека при загрузке страницы
  loadTrack(currentTrackIndex);
</script>

</body>
</html>
